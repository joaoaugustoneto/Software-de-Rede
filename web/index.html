<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Software de Rede</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet"><link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
</head>
<body>
  <div class="container">

    <div id="titulo">
    <h2>Software de Rede</h2>
    <p><strong>IP de Origem (fixo):</strong> 192.168.10.15</p>
    </div>

    <label for="bits">Máscara de rede (bits):</label>
    <input type="number" id="bits" min="1" max="32" placeholder="Ex: 24">

    <label for="destino">IP de destino:</label>
    <input type="text" id="destino" placeholder="Ex: 192.168.10.25">

    <button onclick="verificar()">Verificar Rede</button>

    <div id="saida" class="resultado" style="display:none;"></div>
  </div>

  <script>
    const IP_ORIGEM = "192.168.10.15";

    // Converte bits para máscara decimal
    function bitsParaMascara(bits) {
      let mask = (0xFFFFFFFF << (32 - bits)) >>> 0; 
      let octetos = [
        (mask >>> 24) & 255,
        (mask >>> 16) & 255,
        (mask >>> 8) & 255,
        mask & 255
      ];
      return octetos.join(".");
    }

    // Converte IP string para inteiro
    function ipParaInteiro(ip) {
      return ip.split(".").reduce((acc, val) => (acc << 8) + parseInt(val), 0) >>> 0;
    }

    // Mostra máscara também em binário
    function mascaraBinario(mascara) {
      return mascara.split(".")
        .map(o => parseInt(o).toString(2).padStart(8, "0"))
        .join(" ");
    }

    // Verifica se IP destino está na mesma rede
    function verificar() {
      let bits = parseInt(document.getElementById("bits").value);
      let ipDestino = document.getElementById("destino").value;

      if (!bits || !ipDestino) {
        alert("Preencha todos os campos!");
        return;
      }

      let mascara = bitsParaMascara(bits);
      let ipOrigemInt = ipParaInteiro(IP_ORIGEM);
      let ipDestinoInt = ipParaInteiro(ipDestino);
      let mascaraInt = ipParaInteiro(mascara);

      let redeOrigem = ipOrigemInt & mascaraInt;
      let redeDestino = ipDestinoInt & mascaraInt;

      let saida = document.getElementById("saida");
      saida.style.display = "block";

      saida.innerHTML = `
        <p><strong>Máscara de Rede:</strong> ${mascara}</p>
        <p><strong>Binário:</strong> ${mascaraBinario(mascara)}</p>
        <p><strong>Resultado:</strong> 
          ${redeOrigem === redeDestino 
            ? `O IP ${ipDestino} está na <b>MESMA</b> rede que ${IP_ORIGEM}.`
            : `O IP ${ipDestino} <b>NÃO</b> está na mesma rede que ${IP_ORIGEM}.`}
        </p> `
      ;
    }
  </script>
</body>
</html>